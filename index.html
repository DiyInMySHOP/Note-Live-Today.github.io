import React, { useState } from 'react';
import { Calendar, Edit2, Trash2, Plus, Save, X } from 'lucide-react';

export default function LiveScheduleApp() {
  const daysOfWeek = ['‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå', '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', '‡∏û‡∏∏‡∏ò', '‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ', '‡∏®‡∏∏‡∏Å‡∏£‡πå', '‡πÄ‡∏™‡∏≤‡∏£‡πå'];
  const today = daysOfWeek[new Date().getDay()];
  
  const [schedules, setSchedules] = useState([
    { id: 1, day: '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå', tiktok: '19:00-21:00', youtube: '‚Äî', note: '‡πÄ‡∏õ‡∏¥‡∏î‡∏™‡πÇ‡∏õ‡∏ï‡∏Ñ‡∏∏‡∏¢‡∏≠‡∏î‡∏µ‡∏ï' },
    { id: 2, day: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£', tiktok: '19:00-21:00', youtube: '‚Äî', note: '‡∏ß‡∏±‡∏ô‡∏ß‡∏≤‡∏î ‡∏Ñ‡∏ô‡∏î‡∏π‡πÄ‡∏¢‡∏≠‡∏∞' },
    { id: 3, day: '‡∏û‡∏∏‡∏ò', tiktok: '18:30-20:00', youtube: '20:00-21:30', note: '‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏î‡∏ó‡∏≥ TikTok ‚Üí YT' },
    { id: 4, day: '‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ', tiktok: '19:00-21:00', youtube: '‚Äî', note: '‡∏Ñ‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πâ‡∏≠‡∏õ' },
    { id: 5, day: '‡∏®‡∏∏‡∏Å‡∏£‡πå', tiktok: '20:00-22:00', youtube: '19:00-19:45', note: '‡∏Ñ‡∏ô‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏î' },
    { id: 6, day: '‡πÄ‡∏™‡∏≤‡∏£‡πå', tiktok: '18:00-20:00', youtube: '14:00-15:30', note: '‡∏Ñ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡∏°‡∏≤' },
    { id: 7, day: '‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', tiktok: '19:00-21:00', youtube: '‚Äî', note: '‡∏ß‡∏±‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ‡∏°‡∏≤‡∏Å' }
  ]);

  const todaySchedule = schedules.find(s => s.day === today);

  const [editingId, setEditingId] = useState(null);
  const [editForm, setEditForm] = useState({ day: '', tiktok: '', youtube: '', note: '' });
  const [isAdding, setIsAdding] = useState(false);
  const [newForm, setNewForm] = useState({ day: '', tiktok: '', youtube: '', note: '' });

  const handleEdit = (schedule) => {
    setEditingId(schedule.id);
    setEditForm({ ...schedule });
  };

  const handleSave = () => {
    setSchedules(schedules.map(s => s.id === editingId ? editForm : s));
    setEditingId(null);
  };

  const handleDelete = (id) => {
    if (window.confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
      setSchedules(schedules.filter(s => s.id !== id));
    }
  };

  const handleAdd = () => {
    if (newForm.day && newForm.tiktok) {
      const newSchedule = {
        id: Date.now(),
        ...newForm
      };
      setSchedules([...schedules, newSchedule]);
      setNewForm({ day: '', tiktok: '', youtube: '', note: '' });
      setIsAdding(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 p-4 sm:p-8">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
          <div className="flex items-center gap-3 mb-2">
            <Calendar className="w-8 h-8 text-purple-600" />
            <h1 className="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
              ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏ß‡∏° TikTok + YouTube
            </h1>
          </div>
          <p className="text-gray-600 ml-11">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö: ‡πÑ‡∏•‡∏ü‡πå TikTok ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô + YouTube 2-3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</p>
        </div>

        {/* Today's Schedule Reminder */}
        {todaySchedule && (
          <div className="bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl shadow-xl p-6 mb-6 text-white">
            <h2 className="text-2xl font-bold mb-4 flex items-center gap-2">
              üéØ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ({today}) ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏•‡∏ü‡πå:
            </h2>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div className="bg-white/20 rounded-xl p-4 backdrop-blur-sm">
                <div className="text-sm opacity-90 mb-1">üì± TikTok</div>
                <div className="text-2xl font-bold">{todaySchedule.tiktok}</div>
              </div>
              {todaySchedule.youtube !== '‚Äî' && (
                <div className="bg-white/20 rounded-xl p-4 backdrop-blur-sm">
                  <div className="text-sm opacity-90 mb-1">üé• YouTube</div>
                  <div className="text-2xl font-bold">{todaySchedule.youtube}</div>
                </div>
              )}
            </div>
            {todaySchedule.note && (
              <div className="mt-4 bg-white/10 rounded-xl p-3 backdrop-blur-sm">
                <span className="text-sm opacity-90">üí° ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: </span>
                <span className="font-medium">{todaySchedule.note}</span>
              </div>
            )}
          </div>
        )}

        {/* Add Button */}
        <div className="mb-6">
          <button
            onClick={() => setIsAdding(true)}
            className="flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all duration-300 font-medium"
          >
            <Plus className="w-5 h-5" />
            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
          </button>
        </div>

        {/* Add Form */}
        {isAdding && (
          <div className="bg-white rounded-2xl shadow-xl p-6 mb-6 border-2 border-purple-300">
            <h3 className="text-xl font-bold text-gray-800 mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà</h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <input
                type="text"
                placeholder="‡∏ß‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå)"
                value={newForm.day}
                onChange={(e) => setNewForm({ ...newForm, day: e.target.value })}
                className="px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
              />
              <input
                type="text"
                placeholder="TikTok ‡πÑ‡∏•‡∏ü‡πå (‡πÄ‡∏ä‡πà‡∏ô 19:00-21:00)"
                value={newForm.tiktok}
                onChange={(e) => setNewForm({ ...newForm, tiktok: e.target.value })}
                className="px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
              />
              <input
                type="text"
                placeholder="YouTube ‡πÑ‡∏•‡∏ü‡πå (‡πÄ‡∏ä‡πà‡∏ô 20:00-21:30 ‡∏´‡∏£‡∏∑‡∏≠ ‚Äî)"
                value={newForm.youtube}
                onChange={(e) => setNewForm({ ...newForm, youtube: e.target.value })}
                className="px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
              />
              <input
                type="text"
                placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"
                value={newForm.note}
                onChange={(e) => setNewForm({ ...newForm, note: e.target.value })}
                className="px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
              />
            </div>
            <div className="flex gap-3">
              <button
                onClick={handleAdd}
                className="flex items-center gap-2 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors"
              >
                <Save className="w-4 h-4" />
                ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
              </button>
              <button
                onClick={() => {
                  setIsAdding(false);
                  setNewForm({ day: '', tiktok: '', youtube: '', note: '' });
                }}
                className="flex items-center gap-2 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors"
              >
                <X className="w-4 h-4" />
                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
              </button>
            </div>
          </div>
        )}

        {/* Schedule Table */}
        <div className="bg-white rounded-2xl shadow-xl overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-gradient-to-r from-purple-600 to-pink-600 text-white">
                <tr>
                  <th className="px-6 py-4 text-left font-semibold">‡∏ß‡∏±‡∏ô</th>
                  <th className="px-6 py-4 text-left font-semibold">TikTok ‡πÑ‡∏•‡∏ü‡πå</th>
                  <th className="px-6 py-4 text-left font-semibold">YouTube ‡πÑ‡∏•‡∏ü‡πå</th>
                  <th className="px-6 py-4 text-left font-semibold">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                  <th className="px-6 py-4 text-center font-semibold">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
              </thead>
              <tbody>
                {schedules.map((schedule, index) => (
                  <tr 
                    key={schedule.id} 
                    className={`border-b border-gray-200 hover:bg-purple-50 transition-colors ${
                      schedule.day === today ? 'bg-yellow-100 border-l-4 border-l-yellow-500' : 
                      index % 2 === 0 ? 'bg-gray-50' : 'bg-white'
                    }`}
                  >
                    {editingId === schedule.id ? (
                      <>
                        <td className="px-6 py-4">
                          <input
                            type="text"
                            value={editForm.day}
                            onChange={(e) => setEditForm({ ...editForm, day: e.target.value })}
                            className="w-full px-3 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none"
                          />
                        </td>
                        <td className="px-6 py-4">
                          <input
                            type="text"
                            value={editForm.tiktok}
                            onChange={(e) => setEditForm({ ...editForm, tiktok: e.target.value })}
                            className="w-full px-3 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none"
                          />
                        </td>
                        <td className="px-6 py-4">
                          <input
                            type="text"
                            value={editForm.youtube}
                            onChange={(e) => setEditForm({ ...editForm, youtube: e.target.value })}
                            className="w-full px-3 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none"
                          />
                        </td>
                        <td className="px-6 py-4">
                          <input
                            type="text"
                            value={editForm.note}
                            onChange={(e) => setEditForm({ ...editForm, note: e.target.value })}
                            className="w-full px-3 py-2 border-2 border-purple-300 rounded-lg focus:border-purple-500 focus:outline-none"
                          />
                        </td>
                        <td className="px-6 py-4">
                          <div className="flex gap-2 justify-center">
                            <button
                              onClick={handleSave}
                              className="p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
                              title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"
                            >
                              <Save className="w-4 h-4" />
                            </button>
                            <button
                              onClick={() => setEditingId(null)}
                              className="p-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                              title="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"
                            >
                              <X className="w-4 h-4" />
                            </button>
                          </div>
                        </td>
                      </>
                    ) : (
                      <>
                        <td className="px-6 py-4 font-semibold text-purple-700">
                          {schedule.day}
                          {schedule.day === today && <span className="ml-2 text-xs bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>}
                        </td>
                        <td className="px-6 py-4 text-gray-700">{schedule.tiktok}</td>
                        <td className="px-6 py-4 text-gray-700">{schedule.youtube}</td>
                        <td className="px-6 py-4 text-gray-600">{schedule.note}</td>
                        <td className="px-6 py-4">
                          <div className="flex gap-2 justify-center">
                            <button
                              onClick={() => handleEdit(schedule)}
                              className="p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                              title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"
                            >
                              <Edit2 className="w-4 h-4" />
                            </button>
                            <button
                              onClick={() => handleDelete(schedule.id)}
                              className="p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"
                              title="‡∏•‡∏ö"
                            >
                              <Trash2 className="w-4 h-4" />
                            </button>
                          </div>
                        </td>
                      </>
                    )}
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

        {/* Footer Note */}
        <div className="mt-6 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 border-l-4 border-purple-600">
          <h3 className="font-bold text-purple-900 mb-2">‚≠ê ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</h3>
          <p className="text-purple-800">üöÄ TikTok ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 19:00-21:00</p>
        </div>
      </div>
    </div>
  );
}
